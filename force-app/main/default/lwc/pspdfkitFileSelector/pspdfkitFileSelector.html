<template>
  <div class="page">
    <div class="wrapper">
      <div>
        <div>
          <p title="Configure Template" class="heading">Configure Template</p>
        </div>
      </div>

      <div class="container">

        <!-- //Open the document stored in the record -->
        <lightning-button
        class="button"
        label="Load Template"
        title="Primary action"
        variant="brand"
        stretch
        onclick={loadTemplate}
      ></lightning-button>
      
        <template for:each={placeholders} for:item="placeholder">
          <div key={placeholder.key} class="slds-p-horizontal_medium slds-p-vertical_small">
              <c-custom-look-up
              object-api-name={availableObject}
              label={placeholder.key}
              onselection={handleSelection}
              onchange={handleSearchChange}
              data-key={placeholder.key} 
              search-key={placeholder.searchKey}
              placeholder-name={placeholder.key}
              dropdown-values={relatedObjects}
              >
            </c-custom-look-up>
              
            
              
          </div>
        </template>

        <lightning-button
        class="button"
        label="Save Template"
        title="Primary action"
        variant="brand"
        stretch
        onclick={saveTemplate}
      ></lightning-button>
      </div>
    </div>

    <div class="viewer">
      <iframe
        src="/apex/PSPDFKit_InitPSPDFKit"
        style="border: none; height: 100vh"
        width="100%"
      ></iframe>
    </div>
  </div>

  <template if:true={openModal}>
    <div class="slds-modal slds-fade-in-open slds-backdrop slds-modal_medium">
      <div class="slds-modal__container" style="width: 80%; height: 50%">
        <div class="slds-modal__header">
          <lightning-button-icon
            icon-name="utility:close"
            alternative-text="Close this window"
            size="large"
            variant="bare-inverse"
            onclick={closeModal}
            class="slds-modal__close"
          >
          </lightning-button-icon>
          <h1 style="font-size: 22px; font-weight: bold">Salesforce Files</h1>
        </div>
        <c-pspdfkit-open-salesforce-files
          onpass={selectTemplate}
        ></c-pspdfkit-open-salesforce-files>
      </div>
    </div>
  </template>


</template>
